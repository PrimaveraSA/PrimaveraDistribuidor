<link rel="stylesheet" href="tools/gestion-precios/gestionPrecios.css">

<!-- CONTENIDO PRINCIPAL (sin iframe-container) -->
<div class="tool-gestion-precios container-fluid mt-4 px-4">

  <div class="card-body bg-light">

    <!-- Primera fila: Archivos -->
    <div class="row g-3 mb-4">
      <div class="col-md-6">
        <div class="card border-0 shadow-sm file-card h-100">
          <div class="card-body text-center d-flex flex-column justify-content-center">
            <h6 class="fw-bold text-primary mb-3">
              <i class="bi bi-box-seam me-1"></i> Archivo de Productos
            </h6>
            <input type="file" id="excelProductos" accept=".xlsx,.xls" class="form-control text-center mb-2">
            <small class="text-muted">Última carga: 0 | Registros: 0</small>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="card border-0 shadow-sm file-card h-100">
          <div class="card-body text-center d-flex flex-column justify-content-center">
            <h6 class="fw-bold text-primary mb-3">
              <i class="bi bi-receipt me-1"></i> Archivo de Pedidos
            </h6>
            <input type="file" id="excelPedidos" accept=".xlsx,.xls" class="form-control text-center mb-2">
            <small class="text-muted">Última carga: 0 | Registros: 0</small>
          </div>
        </div>
      </div>
    </div>

    <div class="row text-center mb-4">
      <div class="col-md-4 mb-2">
        <div class="stat-card">
          <h4 id="totalCoincidencias" class="mb-0 text-success fw-bold">0</h4>
          <small class="text-muted">Productos Coincidentes</small>
        </div>
      </div>
      <div class="col-md-4 mb-2">
        <div class="stat-card">
          <h4 id="totalFaltantes" class="mb-0 text-danger fw-bold">0</h4>
          <small class="text-muted">Productos Faltantes</small>
        </div>
      </div>
      <div class="col-md-4 mb-2">
        <div class="stat-card">
          <h4 id="totalSobrantes" class="mb-0 text-warning fw-bold">0</h4>
          <small class="text-muted">Productos Sobrantes</small>
        </div>
      </div>
    </div>

    <!-- Contenedor de resumen (para mostrar/hide dinámicamente) -->
    <div id="resumen" class="d-none mb-4">
      <div class="row text-center">
        <div class="col-md-4 mb-2">
          <div class="stat-card">
            <h4 id="totalCoincidenciasResumen" class="mb-0 text-success fw-bold">0</h4>
            <small class="text-muted">Productos Coincidentes</small>
          </div>
        </div>
        <div class="col-md-4 mb-2">
          <div class="stat-card">
            <h4 id="totalFaltantesResumen" class="mb-0 text-danger fw-bold">0</h4>
            <small class="text-muted">Productos Faltantes</small>
          </div>
        </div>
        <div class="col-md-4 mb-2">
          <div class="stat-card">
            <h4 id="totalSobrantesResumen" class="mb-0 text-warning fw-bold">0</h4>
            <small class="text-muted">Productos Sobrantes</small>
          </div>
        </div>
      </div>
    </div>

    <!-- Tercera fila: Botones de acción -->
    <div class="d-flex justify-content-end mb-4 gap-2">
      <button id="compararBtn" class="btn btn-primary">
        <i class="bi bi-gear me-1"></i> Procesar Datos
      </button>
      <button id="descargarExcelBtn" class="btn btn-success" disabled>
        <i class="bi bi-file-earmark-excel me-1"></i> Descargar Excel
      </button>
      <button id="limpiarTodoBtn" class="btn btn-danger">
        <i class="bi bi-x-circle me-1"></i> Limpiar Datos
      </button>
    </div>

    <!-- Contenedor de alertas -->
    <div id="alertasDashboard" class="mb-3"></div>

    <!-- Card separado para la tabla -->
    <div class="card border-0 shadow-sm mt-4">
      <div class="card-body">

        <!-- Control de cantidad de filas y botón imprimir -->
        <div class="d-flex justify-content-between align-items-center mb-2">
          <div class="d-flex align-items-center gap-2">
            <label for="rowsPerPage" class="text-muted fw-semibold small mb-0">Mostrar:</label>
            <select id="rowsPerPage" class="form-select form-select-sm" style="width: auto;">
              <option value="10">10 filas</option>
              <option value="25">25 filas</option>
              <option value="50" selected>50 filas</option>
              <option value="100">100 filas</option>
              <option value="todos">Todos</option>
            </select>
          </div>

          <button id="btnImprimir" class="btn btn-outline-secondary">
            <i class="bi bi-printer me-1"></i> Imprimir
          </button>
        </div>

        <!-- Tabla -->
        <div id="tablaResultados" class="table-responsive">
          <table class="table table-striped table-bordered align-middle">
            <thead class="text-center">
              <tr>
                <th>Código</th>
                <th>Descripción del Producto</th>
                <th>Unidad</th>
                <th>Cantidad Requerida</th>
                <th>Cantidad en Almacén</th>
                <th>Cantidad Faltante</th>
                <th>Cantidad Sobrante</th>
                <th>Costo Unitario (S/)</th>
                <th>Costo Total (S/)</th>
              </tr>
            </thead>
            <tbody id="tablaBody">
              <!-- Se llenará dinámicamente -->
            </tbody>
          </table>
        </div>

        <!-- Footer de tabla con info y paginación -->
        <div id="tablaFooter" class="d-flex justify-content-between align-items-center mt-2">
          <div id="infoPaginacion" class="text-muted small">
            Mostrando registros del 0 al 0 de un total de 0
          </div>
          <div id="controlPaginacion" class="btn-group">
            <button id="btnAnterior" class="btn btn-outline-secondary btn-sm">Anterior</button>
            <span id="numerosPaginas" class="mx-2 text-muted small"></span>
            <button id="btnSiguiente" class="btn btn-outline-secondary btn-sm">Siguiente</button>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
